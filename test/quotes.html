<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quotes JSON Logic Test</title>
  <style>
    body {
      margin: 0;
      background: #111;
      color: #fff;
      font-family: monospace;
    }
    #quoteWrapper {
      position: relative;
      width: 100vw;
      height: 30px;
      overflow: hidden;
      background: #1d201f;
      display: flex;
      align-items: center;
    }
    #quoteBox {
      position: absolute;
      white-space: nowrap;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="quoteWrapper">
    <p id="quoteBox"></p>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const wrapper = document.getElementById("quoteWrapper");
      const box = document.getElementById("quoteBox");
      const jsonPath = "../system/json/quotes.json";

      let quotes = [];
      let pos = 0;
      let speed = 120;
      let lastTime = null;

      async function loadQuotes() {
        try {
          const res = await fetch(jsonPath);
          const data = await res.json();
          quotes = Array.isArray(data) && data.length ? data : ["No quotes found"];
          start();
        } catch {
          quotes = ["âš  Error loading quotes"];
          start();
        }
      }

      function setQuote() {
        const quote = quotes[Math.floor(Math.random() * quotes.length)];
        box.textContent = quote;
        pos = wrapper.offsetWidth;
        box.style.transform = `translateX(${pos}px)`;
      }

      function animate(t) {
        if (lastTime !== null) {
          const dt = (t - lastTime) / 1000;
          pos -= speed * dt;
          box.style.transform = `translateX(${pos}px)`;
          if (pos + box.offsetWidth < 0) setQuote();
        }
        lastTime = t;
        requestAnimationFrame(animate);
      }

      function start() {
        setQuote();
        requestAnimationFrame(animate);
      }

      loadQuotes();
    });
  </script>
</body>
</html>
