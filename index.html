<body theme="classic">
  <!-- Preloader -->
  <div id="preloader" class="preloader">
    <div class="loader-gif">
      <img id="loaderImage" src="system/images/GIF/loading.gif" alt="Loading animation" />
    </div>
    <div class="load-progress-bar"><div id="progressBar" class="load-progress-fill"></div></div>
    <div id="loaderText" class="loading-text">Loading...</div>
  </div>

  <!-- ðŸ§± Combined Header + Quotes Top Bar -->
  <div id="topBar">
    <!-- Header -->
    <header>
      <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="favorites.html">Favorites</a>
        <a href="system/pages/discovery.html">Discovery</a>
        <a href="system/pages/settings.html">Settings</a>
        <a href="system/pages/support.html">Support</a>
        <a href="info.html">Info</a>
        <div class="pages-anchor">
          <button class="arrowleft" onclick="prevPage()"><img src="system/icons/left.png" alt="Previous page" /></button>
          <span class="page-indicator">...</span>
          <button class="arrowright" onclick="nextPage()"><img src="system/icons/right.png" alt="Next page" /></button>
        </div>
      </nav>

      <div class="header-controls">
        <div class="search-box">
          <input id="searchInputHeader" type="text" placeholder="Search Ï±ames..." />
          <button id="searchBtnHeader"><img src="system/icons/search.png" alt="Search" /></button>
        </div>
        <a href="system/pages/profile.html"><img id="pfp" src="system/icons/profile.png" alt="Profile" /></a>
        <button id="dashboardBtn"><img src="system/icons/dashboard.png" alt="Dashboard" /></button>
      </div>
    </header>

    <!-- Quotes (now part of topBar, always below header) -->
    <div id="quoteWrapper">
      <p id="quoteBox"></p>
    </div>
  </div>

  <!-- Dashboard -->
  <aside id="dashboardMenu" class="dashboard-menu">
    <a href="https://bguhm.github.io/music-player.html">Music Player</a>
    <a href="system/pages/settings-themes.html">Themes</a>
    <a href="system/pages/credits.html">Credits</a>
    <a href="system/pages/alt.html">Alternative Links</a>
  </aside>

  <!-- ðŸ†• Update Popup (supports trailer + link) -->
  <div id="updatePopup" class="update-popup">
    <div class="update-popup-content">
      <h2>Version ... Update!</h2>
      <p>New games, smoother loading, and visual tweaks across the library!</p>

      <!-- Trailer (auto hidden if no trailer link) -->
      <div class="update-video-wrapper" id="updateVideoWrapper">
        <iframe id="updateVideo" width="100%" height="200" src="" title="Update Trailer"
          frameborder="0" allowfullscreen></iframe>
        <div class="video-tooltip">Press F or double click for full screen</div>
      </div>

      <div class="update-buttons">
        <button id="viewUpdateBtn">Check it out!</button>
        <button id="viewUpdateInfoBtn">More information</button>
        <button id="closeUpdateBtn">Close</button>
        <button id="dontShowBtn">Donâ€™t show again</button>
      </div>
    </div>
  </div>

  <!-- Main -->
  <main>
    <div id="container">Loading assets...</div>
  </main>

  <button id="toTopBtn">â¬† Top</button>

  <footer>
    <a href="system/pages/sources.html">Sources</a>
    <a href="system/pages/contributors.html">Contribute</a>
    <a href="system/pages/discord.html">Discord</a>
    <a href="system/pages/bugsNfixes.html">Bugs & Fixes</a>
    <a href="system/pages/contact.html">Socials</a>
    <a href="system/pages/version-log.html" id="footerVersion">Version loading...</a>
  </footer>

  <!-- Scripts -->
  <script src="system/js/settings.js" defer></script>
  <script src="system/js/commands.js" defer></script>
  <script src="system/js/main.js" defer></script>
  <script src="system/js/searcherror.js" defer></script>
  <script src="system/js/index.js" defer></script>
  <script src="system/js/version.js" defer></script>
  <script src="system/js/all.js" defer></script>

  <!-- Quotes script (unchanged) -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const wrapper = document.getElementById("quoteWrapper");
      const box = document.getElementById("quoteBox");
      const jsonPath = "/system/json/quotes.json";

      let quotes = [];
      let pos = 0;
      let speed = 120;
      let lastTime = null;

      async function loadQuotes() {
        try {
          const res = await fetch(jsonPath);
          const data = await res.json();
          quotes = Array.isArray(data) && data.length ? data : ["No quotes found"];
          start();
        } catch {
          quotes = ["âš  Error loading quotes"];
          start();
        }
      }

      function setQuote() {
        const quote = quotes[Math.floor(Math.random() * quotes.length)];
        box.textContent = quote;
        pos = wrapper.offsetWidth;
        box.style.transform = `translateX(${pos}px)`;
      }

      function animate(t) {
        if (lastTime !== null) {
          const dt = (t - lastTime) / 1000;
          pos -= speed * dt;
          box.style.transform = `translateX(${pos}px)`;
          if (pos + box.offsetWidth < 0) setQuote();
        }
        lastTime = t;
        requestAnimationFrame(animate);
      }

      function start() {
        setQuote();
        requestAnimationFrame(animate);
      }

      loadQuotes();
    });
  </script>
</body>
